<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Energy Usage at Mac</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
	<meta name="robots" content="index,follow">
	<link href="https://fonts.googleapis.com/css?family=Oleo+Script|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="test/style.css">
    <link rel="stylesheet" href="test/prittyprint.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>
<body>
	<div id="luxy">
		<main id="main">
            <div id="section01" class="vh-element" data-props="padding-top,padding-bottom" data-values="45,45">
                <div id="bg-section01" class="luxy-el bg-section" data-speed-y="40"></div>
				<div class="content-inner">
					<div class="d-flex justify-content-center oleo">
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="-12">E</div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="-6">n</div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="-3">e</div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">r</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">g</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">y</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0"> </div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">U</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">s</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">a</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">g</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">e</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0"> </div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0">@</div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="0"> </div>
                        <div class="luxy-el inner-el" data-horizontal="1" data-speed-x="1.5">M</div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="6">a</div>
						<div class="luxy-el inner-el" data-horizontal="1" data-speed-x="12">c</div>
					</div>
                    <div class="text-center">
                        <p>Visualizing large scale energy usage</p>
                    </div>
				</div>
			</div>
			<div id="section02">
                <div class="container z-depth-3">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <h3 class="oleo title text-center mb-3">Understanding Energy at Scale</h3>
                            <p>Energy usage can just look like numbers without the necessary context</p>
                            <div id="chart"></div>
                                <script>                                 
                              // Specify the chart’s dimensions.
                              const width1 = window.innerWidth;
                              const height1 = window.innerHeight;
                              const marginTop = 10;
                              const marginRight = 10;
                              const marginBottom = 20;
                              const marginLeft = 40;
                              
                                 
                              var data = d3.csv("src/Hourly_data/combined_hourly_data_final_withoutgen.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {

                              // Convert Date objects to string representation for use as keys
                              const uniqueKeys = d3.union(data.map(d => d.building));
                              console.log(uniqueKeys);
                              
                              const series = d3.stack()
                                  .keys(uniqueKeys)
                                  .value(([, D], key) => {
                                    if (D.get(key) == undefined){
                                      return 0;
                                    }
                                    return D.get(key).kWh;
                                  })
                                  (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack
      
                                // Prepare the scales for positional and color encodings.
                              const x = d3.scaleUtc()
                                  .domain(d3.extent(data, d => d.date))
                                  .range([marginLeft, width1 - marginRight]);
                              

                              const y = d3.scaleLinear()
                                  .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                  .rangeRound([height1 - marginBottom, marginTop]);

                                // Construct an area shape.
                              const area = d3.area()
                                  .x(d => x(d.data[0]))
                                  .y0(d => y(d[0]))
                                  .y1(d => y(d[1]));

                              // Create the SVG container.
                              const svg = d3.create("svg")
                                  .attr("width", width1 + 150)
                                  .attr("height", height1)
                                  .attr("viewBox", [0, 0, width1, height1])
                                  .attr("style", "max-width: 100%; height: auto;");

                              // Add the y-axis, remove the domain line, add grid lines and a label.
                              svg.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(${marginLeft},0)`)
                                  .call(d3.axisLeft(y).ticks(height1 / 80))
                                  .call(g => g.select(".domain").remove())
                                  .call(g => g.selectAll(".tick line").clone()
                                      .attr("x2", width1 - marginLeft - marginRight)
                                      .attr("stroke-opacity", 0.1))
                                  .call(g => g.append("text")
                                      .attr("x", -marginLeft)
                                      .attr("y", 10)
                                      .attr("fill", "currentColor")
                                      .attr("text-anchor", "start")
                                      .text("↑ kWh"));
                            const color1 = d3.scaleOrdinal()
                            .domain(series.map(d => d.key))
                            .range(d3.schemeTableau10);
                              // Append a path for each series.
                              svg.append("g")
                                .selectAll()
                                .data(series)
                                .join("path")
                                  .attr("fill", d => color1(d.key))
                                  .attr("d", area)
                                .append("title")
                                  .text(d => d.key);

                              // Append the horizontal axis atop the area.
                              svg.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(0,${height1 - marginBottom})`)
                                  .call(d3.axisBottom(x).tickSizeOuter(0));

                              // Return the chart with the color scale as a property (for the legend).
                              chart.append(svg.node());
                              });
                                    </script>
                            <p>Let's dive a bit deeper to fully understand</p>
                        </div>
                    </div>
                </div>
                
            </div>
            <div id="section03" class="vh-element" data-props="padding-top" data-values="50">
              <div id="bg-section02" class="luxy-el bg-section" data-speed-y="-10">
                  <div class="container"> <!-- Wrap the content in a container -->
                      <div class="row justify-content-center">
                          
                      </div>
                  </div>
              </div>
          </div>
            <div id="section04">
                <div class="container z-depth-2">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <h3 class="oleo title text-center mb-3">What is a kilowatt-hour</h3>
                            <p>
                              In the realm of energy measurement, the kilowatt-hour (kWh) stands as a pivotal unit, serving as the cornerstone for 
                              understanding and managing power consumption. Defined as the energy expended when one kilowatt of power operates for one hour.
                            </p>
                            <h2>Below is a tool to help visulize what can be powered by 1000W for an hour, a kWh.</h2>
                            <div class="dropdown">
                                <!-- Dropdown button -->
                                <button onclick= "toggleDropdown()" class="dropbtn" id="dropdownButton">Dropdown</button>
                                
                                <!-- Dropdown content -->
                                <div id="myDropdown" class="dropdown-content">
                                  <!-- Dropdown items -->
                                  <a href="#" onclick="selectOption('Charging a Phone', event)">Charging a Phone</a>
                                  <a href="#" onclick="selectOption('Microwave', event)">Microwave</a>
                                  <a href="#" onclick="selectOption('Charging a Computer', event)">Charging a Computer</a>
                                  <a href="#" onclick="selectOption('Lightbulb', event)">Lightbulb</a>
                                  <a href="#" onclick="selectOption('T.V.', event)">T.V.</a>
                                </div>
                                <script>function toggleDropdown() {
                                  var dropdown = document.getElementById("myDropdown");
                                  dropdown.classList.toggle("show");
                                }
                                // Function to handle option selection
                                function selectOption(optionText, event) {
    var dropdownButton = document.getElementById("dropdownButton");
    dropdownButton.textContent = optionText;

    // Ensure $ is available by using jQuery.noConflict()
    jQuery.noConflict();

    // Reload the script
    jQuery(".balls").attr('src', function (_, val) {
      return val.split('?')[0] + "?" + Math.floor(Math.random() * 10000000);
    });

    // Reload the div
    jQuery("#graphballs").load(location.href + " .graphballs");
  }
                                </script>
                              </div>
                              
                            <div id="graphballs"></div>
                                <script class = "balls" src="src/js/balls.js">
                                </script>
                              
                            
                        </div>
                    </div>
                </div>
            </div>
            <div id="section05" class="vh-element" data-props="padding-top" data-values="50">
                <div id="bg-section03" class="luxy-el bg-section" data-speed-y="-10"></div>
            </div>
            <div id="section06">
                <div class="container z-depth-2">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <h3 class="oleo title text-center mb-3">Dorm Buildings</h3>
                            <p>Dorm buildings while not the largest consumers of electricity on the campus, do represent the most
                              relatable data as most of the power draw we would assume comes from student use and not infrastructure.
                            </p>
                            <div id="graphDorm"> </div>
                              <script>
                              var data = d3.csv("src/Hourly_data/dorms_2022-2023_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {

                              // Convert Date objects to string representation for use as keys
                              const uniqueKeys = d3.union(data.map(d => d.building));
                              
                              const series = d3.stack()
                                  .keys(uniqueKeys)
                                  .value(([, D], key) => {
                                    if (D.get(key) == undefined){
                                      return 0;
                                    }
                                    return D.get(key).kWh;
                                  })
                                  (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack
      
                                // Prepare the scales for positional and color encodings.
                              const x = d3.scaleUtc()
                                  .domain(d3.extent(data, d => d.date))
                                  .range([marginLeft, width1 - marginRight]);
                              

                              const y = d3.scaleLinear()
                                  .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                  .rangeRound([height1 - marginBottom, marginTop]);

                                // Construct an area shape.
                              const area = d3.area()
                                  .x(d => x(d.data[0]))
                                  .y0(d => y(d[0]))
                                  .y1(d => y(d[1]));

                              // Create the SVG container.
                              const svg1 = d3.create("svg")
                                  .attr("width", width1)
                                  .attr("height", height1)
                                  .attr("viewBox", [0, 0, width1 + 10, height1+40])
                                  .attr("style", "max-width: 100%; height: 100%;");

                              // Add the y-axis, remove the domain line, add grid lines and a label.
                              svg1.append("g")
                                  .attr("transform", `translate(${marginLeft},0)`)
                                  .style("font-size", "18px")
                                  .call(d3.axisLeft(y).ticks(height1 / 80))
                                  .call(g => g.select(".domain").remove())
                                  .call(g => g.selectAll(".tick line").clone()
                                      .attr("x2", width1 - marginLeft - marginRight)
                                      .attr("stroke-opacity", 0.1))
                                  .call(g => g.append("text")
                              
                                      .attr("x", -marginLeft)
                                      .attr("y", 10)
                                      .attr("fill", "currentColor")
                                      .attr("text-anchor", "start")
                                      .text("↑ kWh"));
                            const color1 = d3.scaleOrdinal()
                            .domain(series.map(d => d.key))
                            .range(d3.schemeTableau10);
                              // Append a path for each series.
                              svg1.append("g")
                                .selectAll()
                                .data(series)
                                .join("path")
                                  .attr("fill", d => color1(d.key))
                                  .attr("d", area)
                                .append("title")
                                  .text(d => d.key);

                              // Append the horizontal axis atop the area.
                              svg1.append("g")
                                  .attr("transform", `translate(0,${height1 - marginBottom})`)
                                  .call(d3.axisBottom(x).tickSizeOuter(0))
                                  .style("font-size", "18px");

                              // Adjust the margin to accommodate the legend
                              const marginRightLegend = 200; // Adjust this value based on your needs

                              // Create a legend
                              const legend = svg1.append("g")
                                  .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                  .attr("font-family", "sans-serif")
                                  .attr("font-size", 12)
                                  .selectAll("g")
                                  .data(series.map(d => d.key))
                                  .join("g")
                                  .attr("transform", (d, i) => `translate(0,${i * 20})`);

                              legend.append("rect")
                                  .attr("width", 18)
                                  .attr("height", 18)
                                  .attr("fill", d => color1(d));

                              legend.append("text")
                                  .attr("x", 24)
                                  .attr("y", 9)
                                  .attr("dy", "0.35em")
                                  .text(d => d)
                                  .attr("fill", "white");
                              graphDorm.append(svg1.node());
                              });
                              </script>
                            <p>Let's zoom in a bit, clearly we can see the effect of the summer and winter breaks on the power
                              usage. Lets take a look at just one day, December 5 2022.
                            </p>
                            <div id = "decemberDormGraph">
                              <script>
                                var data = d3.csv("src/Hourly_data/dorms_12-5-22_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {
                                // Convert Date objects to string representation for use as keys
                                const uniqueKeys = d3.union(data.map(d => d.building));
                                
                                const series = d3.stack()
                                    .keys(uniqueKeys)
                                    .value(([, D], key) => {
                                      if (D.get(key) == undefined){
                                        return 0;
                                      }
                                      return D.get(key).kWh;
                                    })
                                    (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                                  // Prepare the scales for positional and color encodings.
                                const x = d3.scaleUtc()
                                    .domain(d3.extent(data, d => d.date))
                                    .range([marginLeft, width1 - marginRight]);


                                const y = d3.scaleLinear()
                                    .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                    .rangeRound([height1 - marginBottom, marginTop]);

                                  // Construct an area shape.
                                const area = d3.area()
                                    .x(d => x(d.data[0]))
                                    .y0(d => y(d[0]))
                                    .y1(d => y(d[1]));

                                // Create the SVG container.
                                const svg4 = d3.create("svg")
                                    .attr("width", width1)
                                    .attr("height", height1)
                                    .attr("viewBox", [0, 0, width1 + 10, height1+40])
                                    .attr("style", "max-width: 100%; height: 100%;");

                                // Add the y-axis, remove the domain line, add grid lines and a label.
                                svg4.append("g")
                                    .attr("transform", `translate(${marginLeft},0)`)
                                    .style("font-size", "18px")
                                    .call(d3.axisLeft(y).ticks(height1 / 80))
                                    .call(g => g.select(".domain").remove())
                                    .call(g => g.selectAll(".tick line").clone()
                                        .attr("x2", width1 - marginLeft - marginRight)
                                        .attr("stroke-opacity", 0.1))
                                    .call(g => g.append("text")

                                        .attr("x", -marginLeft)
                                        .attr("y", 10)
                                        .attr("fill", "currentColor")
                                        .attr("text-anchor", "start")
                                        .text("↑ kWh"));
                                const color1 = d3.scaleOrdinal()
                                .domain(series.map(d => d.key))
                                .range(d3.schemeTableau10);
                                // Append a path for each series.
                                svg4.append("g")
                                  .selectAll()
                                  .data(series)
                                  .join("path")
                                    .attr("fill", d => color1(d.key))
                                    .attr("d", area)
                                  .append("title")
                                    .text(d => d.key);

                                // Append the horizontal axis atop the area.
                                svg4.append("g")
                                    .attr("transform", `translate(0,${height1 - marginBottom})`)
                                    .call(d3.axisBottom(x).tickSizeOuter(0))
                                    .style("font-size", "18px");

                                // Adjust the margin to accommodate the legend
                                const marginRightLegend = 200; // Adjust this value based on your needs

                                // Create a legend
                                const legend = svg4.append("g")
                                    .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                    .attr("font-family", "sans-serif")
                                    .attr("font-size", 12)
                                    .selectAll("g")
                                    .data(series.map(d => d.key))
                                    .join("g")
                                    .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                legend.append("rect")
                                    .attr("width", 18)
                                    .attr("height", 18)
                                    .attr("fill", d => color1(d));

                                legend.append("text")
                                    .attr("x", 24)
                                    .attr("y", 9)
                                    .attr("dy", "0.35em")
                                    .text(d => d)
                                    .attr("fill", "white");
                                    decemberDormGraph.append(svg4.node());
                                });
                              </script>
                            </div>
                            <p>How does this compare to a day in the fall? September 11, 2023</p>
                            <div id = "SeptemberDormGraph"> </div>
                              <script>
                                var data = d3.csv("src/Hourly_data/dorms_09-11-23_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {
                                // Convert Date objects to string representation for use as keys
                                const uniqueKeys = d3.union(data.map(d => d.building));
                                
                                const series = d3.stack()
                                    .keys(uniqueKeys)
                                    .value(([, D], key) => {
                                      if (D.get(key) == undefined){
                                        return 0;
                                      }
                                      return D.get(key).kWh;
                                    })
                                    (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                                  // Prepare the scales for positional and color encodings.
                                const x = d3.scaleUtc()
                                    .domain(d3.extent(data, d => d.date))
                                    .range([marginLeft, width1 - marginRight]);


                                const y = d3.scaleLinear()
                                    .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                    .rangeRound([height1 - marginBottom, marginTop]);

                                  // Construct an area shape.
                                const area = d3.area()
                                    .x(d => x(d.data[0]))
                                    .y0(d => y(d[0]))
                                    .y1(d => y(d[1]));

                                // Create the SVG container.
                                const svg5 = d3.create("svg")
                                    .attr("width", width1)
                                    .attr("height", height1)
                                    .attr("viewBox", [0, 0, width1 + 10, height1+40])
                                    .attr("style", "max-width: 100%; height: 100%;");

                                // Add the y-axis, remove the domain line, add grid lines and a label.
                                svg5.append("g")
                                    .attr("transform", `translate(${marginLeft},0)`)
                                    .style("font-size", "18px")
                                    .call(d3.axisLeft(y).ticks(height1 / 80))
                                    .call(g => g.select(".domain").remove())
                                    .call(g => g.selectAll(".tick line").clone()
                                        .attr("x2", width1 - marginLeft - marginRight)
                                        .attr("stroke-opacity", 0.1))
                                    .call(g => g.append("text")

                                        .attr("x", -marginLeft)
                                        .attr("y", 10)
                                        .attr("fill", "currentColor")
                                        .attr("text-anchor", "start")
                                        .text("↑ kWh"));
                                const color1 = d3.scaleOrdinal()
                                .domain(series.map(d => d.key))
                                .range(d3.schemeTableau10);
                                // Append a path for each series.
                                svg5.append("g")
                                  .selectAll()
                                  .data(series)
                                  .join("path")
                                    .attr("fill", d => color1(d.key))
                                    .attr("d", area)
                                  .append("title")
                                    .text(d => d.key);

                                // Append the horizontal axis atop the area.
                                svg5.append("g")
                                    .attr("transform", `translate(0,${height1 - marginBottom})`)
                                    .call(d3.axisBottom(x).tickSizeOuter(0))
                                    .style("font-size", "18px");

                                // Adjust the margin to accommodate the legend
                                const marginRightLegend = 200; // Adjust this value based on your needs

                                // Create a legend
                                const legend = svg5.append("g")
                                    .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                    .attr("font-family", "sans-serif")
                                    .attr("font-size", 12)
                                    .selectAll("g")
                                    .data(series.map(d => d.key))
                                    .join("g")
                                    .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                legend.append("rect")
                                    .attr("width", 18)
                                    .attr("height", 18)
                                    .attr("fill", d => color1(d));

                                legend.append("text")
                                    .attr("x", 24)
                                    .attr("y", 9)
                                    .attr("dy", "0.35em")
                                    .text(d => d)
                                    .attr("fill", "white");
                                    SeptemberDormGraph.append(svg5.node());
                                });
                              </script>
                              <p>Does a dorm effect the energy usage per person?</p>
                              <div id = "dormPerPerson"></div>
                              <script>
                                var data = d3.csv("src/Hourly_data/dorms_2022_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {
                                // Convert Date objects to string representation for use as keys
                                const uniqueKeys = d3.union(data.map(d => d.building));
                                
                                const series = d3.stack()
                                    .keys(uniqueKeys)
                                    .value(([, D], key) => {
                                      if (D.get(key) == undefined){
                                        return 0;
                                      }
                                      return D.get(key).kWh;
                                    })
                                    (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                                  // Prepare the scales for positional and color encodings.
                                const x = d3.scaleUtc()
                                    .domain(d3.extent(data, d => d.date))
                                    .range([marginLeft, width1 - marginRight]);


                                const y = d3.scaleLinear()
                                    .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                    .rangeRound([height1 - marginBottom, marginTop]);

                                  // Construct an area shape.
                                const area = d3.area()
                                    .x(d => x(d.data[0]))
                                    .y0(d => y(d[0]))
                                    .y1(d => y(d[1]));

                                // Create the SVG container.
                                const svg6 = d3.create("svg")
                                    .attr("width", width1)
                                    .attr("height", height1)
                                    .attr("viewBox", [0, 0, width1 + 10, height1+40])
                                    .attr("style", "max-width: 100%; height: 100%;");

                                // Add the y-axis, remove the domain line, add grid lines and a label.
                                svg6.append("g")
                                    .attr("transform", `translate(${marginLeft},0)`)
                                    .style("font-size", "18px")
                                    .call(d3.axisLeft(y).ticks(height1 / 80))
                                    .call(g => g.select(".domain").remove())
                                    .call(g => g.selectAll(".tick line").clone()
                                        .attr("x2", width1 - marginLeft - marginRight)
                                        .attr("stroke-opacity", 0.1))
                                    .call(g => g.append("text")

                                        .attr("x", -marginLeft)
                                        .attr("y", 10)
                                        .attr("fill", "currentColor")
                                        .attr("text-anchor", "start")
                                        .text("↑ kWh"));
                                const color1 = d3.scaleOrdinal()
                                .domain(series.map(d => d.key))
                                .range(d3.schemeTableau10);
                                // Append a path for each series.
                                svg6.append("g")
                                  .selectAll()
                                  .data(series)
                                  .join("path")
                                    .attr("fill", d => color1(d.key))
                                    .attr("d", area)
                                  .append("title")
                                    .text(d => d.key);

                                // Append the horizontal axis atop the area.
                                svg6.append("g")
                                    .attr("transform", `translate(0,${height1 - marginBottom})`)
                                    .call(d3.axisBottom(x).tickSizeOuter(0))
                                    .style("font-size", "18px");

                                // Adjust the margin to accommodate the legend
                                const marginRightLegend = 200; // Adjust this value based on your needs

                                // Create a legend
                                const legend = svg6.append("g")
                                    .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                    .attr("font-family", "sans-serif")
                                    .attr("font-size", 12)
                                    .selectAll("g")
                                    .data(series.map(d => d.key))
                                    .join("g")
                                    .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                legend.append("rect")
                                    .attr("width", 18)
                                    .attr("height", 18)
                                    .attr("fill", d => color1(d));

                                legend.append("text")
                                    .attr("x", 24)
                                    .attr("y", 9)
                                    .attr("dy", "0.35em")
                                    .text(d => d)
                                    .attr("fill", "white");
                                    dormPerPerson.append(svg6.node());
                                });
                              </script>

                        </div>
                    </div>
                </div>
            </div>
            <div id="section07">
              <div class="container z-depth-2">
                  <div class="row justify-content-center">
                      <div class="col-lg-8">
                          <h3 class="oleo title text-center mb-3">Academic Buildings</h3>
                          <p>Academic buildings are the heart of the campus and not suprisingly also the majority of the electirity use on campus,
                            lets dive into some possible reasons.
                          </p>
                          <div id="graphAcademic"> </div>
                            <script>
                              var data = d3.csv("src/Hourly_data/academic_2022-2023_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {
                              // Convert Date objects to string representation for use as keys
                              const uniqueKeys = d3.union(data.map(d => d.building));
                              
                              const series = d3.stack()
                                  .keys(uniqueKeys)
                                  .value(([, D], key) => {
                                    if (D.get(key) == undefined){
                                      return 0;
                                    }
                                    return D.get(key).kWh;
                                  })
                                  (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                                // Prepare the scales for positional and color encodings.
                              const x = d3.scaleUtc()
                                  .domain(d3.extent(data, d => d.date))
                                  .range([marginLeft, width1 - marginRight]);


                              const y = d3.scaleLinear()
                                  .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                  .rangeRound([height1 - marginBottom, marginTop]);

                                // Construct an area shape.
                              const area = d3.area()
                                  .x(d => x(d.data[0]))
                                  .y0(d => y(d[0]))
                                  .y1(d => y(d[1]));

                              // Create the SVG container.
                              const svg2 = d3.create("svg")
                                  .attr("width", width1)
                                  .attr("height", height1)
                                  .attr("viewBox", [0, 0, width1, height1])
                                  .attr("style", "max-width: 100%; height: auto;");

                              // Add the y-axis, remove the domain line, add grid lines and a label.
                              svg2.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(${marginLeft},0)`)
                                  .call(d3.axisLeft(y).ticks(height1 / 80))
                                  .call(g => g.select(".domain").remove())
                                  .call(g => g.selectAll(".tick line").clone()
                                      .attr("x2", width1 - marginLeft - marginRight)
                                      .attr("stroke-opacity", 0.1))
                                  .call(g => g.append("text")
                                      .attr("x", -marginLeft)
                                      .attr("y", 10)
                                      .attr("fill", "currentColor")
                                      .attr("text-anchor", "start")
                                      .text("↑ kWh"));
                              const color1 = d3.scaleOrdinal()
                              .domain(series.map(d => d.key))
                              .range(d3.schemeTableau10);
                              // Append a path for each series.
                              svg2.append("g")
                                .selectAll()
                                .data(series)
                                .join("path")
                                  .attr("fill", d => color1(d.key))
                                  .attr("d", area)
                                .append("title")
                                  .text(d => d.key);

                              // Append the horizontal axis atop the area.
                              svg2.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(0,${height1 - marginBottom})`)
                                  .call(d3.axisBottom(x).tickSizeOuter(0));

                                  const marginRightLegend = 200; // Adjust this value based on your needs

                                  // Create a legend
                                  const legend = svg2.append("g")
                                      .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                      .attr("font-family", "sans-serif")
                                      .attr("font-size", 12)
                                      .selectAll("g")
                                      .data(series.map(d => d.key))
                                      .join("g")
                                      .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                  legend.append("rect")
                                      .attr("width", 18)
                                      .attr("height", 18)
                                      .attr("fill", d => color1(d));

                                  legend.append("text")
                                      .attr("x", 24)
                                      .attr("y", 9)
                                      .attr("dy", "0.35em")
                                      .text(d => d)
                                      .attr("fill", "white");
                              graphAcademic.append(svg2.node());
                              });
                            </script>
                            <p>In a similar note to dorms, do different academic buildings have different efficencies? Let's look
                              at energy used per square foot.
                            </p>
                            <div id = "graphAcademicSq"></div>
                            <script>
                              var data = d3.csv("src/Hourly_data/academic_sq_2022_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {
                              // Convert Date objects to string representation for use as keys
                              const uniqueKeys = d3.union(data.map(d => d.building));
                              
                              const series = d3.stack()
                                  .keys(uniqueKeys)
                                  .value(([, D], key) => {
                                    if (D.get(key) == undefined){
                                      return 0;
                                    }
                                    return D.get(key).kWh;
                                  })
                                  (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                                // Prepare the scales for positional and color encodings.
                              const x = d3.scaleUtc()
                                  .domain(d3.extent(data, d => d.date))
                                  .range([marginLeft, width1 - marginRight]);


                              const y = d3.scaleLinear()
                                  .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                  .rangeRound([height1 - marginBottom, marginTop]);

                                // Construct an area shape.
                              const area = d3.area()
                                  .x(d => x(d.data[0]))
                                  .y0(d => y(d[0]))
                                  .y1(d => y(d[1]));

                              // Create the SVG container.
                              const svg9 = d3.create("svg")
                                  .attr("width", width1)
                                  .attr("height", height1)
                                  .attr("viewBox", [0, 0, width1, height1])
                                  .attr("style", "max-width: 100%; height: auto;");

                              // Add the y-axis, remove the domain line, add grid lines and a label.
                              svg9.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(${marginLeft},0)`)
                                  .call(d3.axisLeft(y).ticks(height1 / 80))
                                  .call(g => g.select(".domain").remove())
                                  .call(g => g.selectAll(".tick line").clone()
                                      .attr("x2", width1 - marginLeft - marginRight)
                                      .attr("stroke-opacity", 0.1))
                                  .call(g => g.append("text")
                                      .attr("x", -marginLeft)
                                      .attr("y", 10)
                                      .attr("fill", "currentColor")
                                      .attr("text-anchor", "start")
                                      .text("↑ kWh"));
                              const color1 = d3.scaleOrdinal()
                              .domain(series.map(d => d.key))
                              .range(d3.schemeTableau10);
                              // Append a path for each series.
                              svg9.append("g")
                                .selectAll()
                                .data(series)
                                .join("path")
                                  .attr("fill", d => color1(d.key))
                                  .attr("d", area)
                                .append("title")
                                  .text(d => d.key);

                              // Append the horizontal axis atop the area.
                              svg9.append("g")
                              .style("font-size", "14px")
                                  .attr("transform", `translate(0,${height1 - marginBottom})`)
                                  .call(d3.axisBottom(x).tickSizeOuter(0));

                                  const marginRightLegend = 200; // Adjust this value based on your needs

                                  // Create a legend
                                  const legend = svg9.append("g")
                                      .attr("transform", `translate(${width1 - marginRight - marginRightLegend}, ${marginTop})`)
                                      .attr("font-family", "sans-serif")
                                      .attr("font-size", 12)
                                      .selectAll("g")
                                      .data(series.map(d => d.key))
                                      .join("g")
                                      .attr("transform", (d, i) => `translate(0,${i * 20})`);

                                  legend.append("rect")
                                      .attr("width", 18)
                                      .attr("height", 18)
                                      .attr("fill", d => color1(d));

                                  legend.append("text")
                                      .attr("x", 24)
                                      .attr("y", 9)
                                      .attr("dy", "0.35em")
                                      .text(d => d)
                                      .attr("fill", "white");
                              graphAcademicSq.append(svg9.node());
                              });
                            </script>
                          </div>
                      
                  </div>
              </div>
          </div>
          <div id="section08">
            <div class="container z-depth-2">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h3 class="oleo title text-center mb-3">Stadium and Tennis Court Lights</h3>
                        <p>Stadium lights are a unique fixture as we can see the effect of different types of sporting events directly by examening the power 
                          draw of the lights.
                        </p>
                        <div id="graphLights">
                          <script>
                            var data = d3.csv("src/Hourly_data/stadium_2022-2023_hourly.csv",function(d){return {date: new Date(d.date),building: d.building,kWh:+ d.kWh};}).then(data => {

                            // Convert Date objects to string representation for use as keys
                            const uniqueKeys = d3.union(data.map(d => d.building));

                            const series = d3.stack()
                                .keys(uniqueKeys)
                                .value(([, D], key) => {
                                  if (D.get(key) == undefined){
                                    return 0;
                                  }
                                  return D.get(key).kWh;
                                })
                                (d3.index(data, d => d.date, d => d.building)); // get value for each series key and stack

                              // Prepare the scales for positional and color encodings.
                            const x = d3.scaleUtc()
                                .domain(d3.extent(data, d => d.date))
                                .range([marginLeft, width1 - marginRight]);


                            const y = d3.scaleLinear()
                                .domain([0, d3.max(series, d => d3.max(d, d => d[1]))])
                                .rangeRound([height1 - marginBottom, marginTop]);

                              // Construct an area shape.
                            const area = d3.area()
                                .x(d => x(d.data[0]))
                                .y0(d => y(d[0]))
                                .y1(d => y(d[1]));

                            // Create the SVG container.
                            const svg3 = d3.create("svg")
                                .attr("width", width1)
                                .attr("height", height1)
                                .attr("viewBox", [0, 0, width1, height1])
                                .attr("style", "max-width: 100%; height: auto;");

                            // Add the y-axis, remove the domain line, add grid lines and a label.
                            svg3.append("g")
                            .style("font-size", "14px")
                                .attr("transform", `translate(${marginLeft},0)`)
                                .call(d3.axisLeft(y).ticks(height1 / 80))
                                .call(g => g.select(".domain").remove())
                                .call(g => g.selectAll(".tick line").clone()
                                    .attr("x2", width1 - marginLeft - marginRight)
                                    .attr("stroke-opacity", 0.1))
                                .call(g => g.append("text")
                                    .attr("x", -marginLeft)
                                    .attr("y", 10)
                                    .attr("fill", "currentColor")
                                    .attr("text-anchor", "start")
                                    .text("↑ kWh"));
                            const color1 = d3.scaleOrdinal()
                            .domain(series.map(d => d.key))
                            .range(['red']);
                            // Append a path for each series.
                            svg3.append("g")
                              .selectAll()
                              .data(series)
                              .join("path")
                                .attr("fill", d => color1(d.key))
                                .attr("d", area)
                              .append("title")
                                .text(d => d.key);

                            // Append the horizontal axis atop the area.
                            svg3.append("g")
                            .style("font-size", "14px")
                                .attr("transform", `translate(0,${height1 - marginBottom})`)
                                .call(d3.axisBottom(x).tickSizeOuter(0));
                            graphLights.append(svg3.node());
                            });
                          </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="section09">
          <div class="container z-depth-3">
              <div class="row justify-content-center">
                  <div class="col-lg-8">
                      <h3 class="oleo title text-center mb-3">Thanks for visiting!</h3>
                      
                  </div>
              </div>
          </div>
          
      </div>
		</main>
		
	</div>
	<script src="https://rawgit.com/google/code-prettify/master/loader/run_prettify.js" defer></script>
    <script src="test/script.js" charset="utf-8"></script>
	<script src="dist/js/luxy.js" charset="utf-8"></script>
	<script>
		luxy.init({
			wrapper: '#luxy',
			targets : '.luxy-el',
			wrapperSpeed:  0.08
		});
	</script>
</body>
</html>